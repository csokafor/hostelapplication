<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="admintemplate.xhtml"> 

<ui:define name="content">

    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/>
    
    <p:panel>
        <f:facet name="header">Hostel Search</f:facet>
        <h:form id="search"> 
            <br/>
            <br/>
            <h:outputText value="Hostel" />
            <p:spacer width="10" height="10" />
               
            <h:selectOneMenu id="hostel" required="true" value="#{hostelAdminSearchBean.hostelId}">
                <f:selectItem itemLabel="Select Hostel" itemValue="0" />
                <f:selectItems id="hostelSelect" value="#{hostelApplicationHelper.hostels}" var="hostelItem" itemLabel="#{hostelItem.hostelName}" 
                               itemValue="#{hostelItem.id}"/>                   
            </h:selectOneMenu>
            <br/>
            <br/>
            <h:commandButton id="searchHostelAdmin" value="Get Rooms" action="#{hostelAdminSearchBean.search}" />
            <br/>              
        </h:form>            
    </p:panel>
        
       
    <p:panel rendered="#{hostelAdminSearchBean.hostel ne null}">
        <p:panelGrid columns="2" columnClasses="label, value">   
            <h:outputText value="Name" />
            <h:outputText value="#{hostelAdminSearchBean.hostel.hostelName}" />

            <h:outputText value="Gender" />
            <h:outputText value="#{hostelAdminSearchBean.hostel.gender}" />

            <h:outputText value="Description" />
            <h:outputText value="#{hostelAdminSearchBean.hostel.description}" />

            <h:outputText value="No of Rooms" />
            <h:outputText value="#{hostelAdminSearchBean.hostel.numberOfRooms}" />                                
        </p:panelGrid>        
        <br/>
        <h:form id="printhostel">
        <h:commandLink id="printhostellist" value="[Print Hostel Student List]" action="#{hostelAdminSearchBean.printHostelList(hostelAdminSearchBean.hostelId)}" />                   
        <br/>   
        </h:form>
    
        <f:facet name="header">Hostel Rooms</f:facet>           
                
        <h:outputText id="NoHostelRoomsFoundMessage" value="No Hostel Room Found" 
            rendered="#{hostelAdminSearchBean.hostelRooms != null and hostelAdminSearchBean.hostelRooms.size() == 0}"/>
        
        <p:dataTable id="hostelRooms" value="#{hostelAdminSearchBean.hostelRooms}" var="hostelRoom" 
            rows="20"  paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="20,30,40" rendered="#{hostelAdminSearchBean.hostelRooms.size() > 0}">
            
            <p:column id="roomnumber" headerText="Room Number">                    
                <h:outputText value="#{hostelRoom.roomNumber}" />
            </p:column>
            <p:column id="maxoccupants" headerText="Max Occupants">                    
                <h:outputText value="#{hostelRoom.numberOfOccupants}" />
            </p:column>
            <p:column id="nooccupants" headerText="No of Occupants">                    
                <h:outputText value="#{hostelRoom.hostelAllocations.size()}" />
            </p:column>
            <p:column id="occupants" headerText="Occupants">                    
                <h:outputText value="#{hostelAdminSearchBean.getHostelOccupants(hostelRoom)}" />
            </p:column>            
           
        </p:dataTable>
                
    </p:panel>
                
    </ui:define>

</ui:composition>
