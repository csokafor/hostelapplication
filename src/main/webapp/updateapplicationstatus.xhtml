<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="templates/template.xhtml">

    <ui:define name="content">
	    
        <p:panel rendered="#{applicationStatusBean.loggedIn}">
            <f:facet name="header">Hostel Application Information</f:facet>
            
            <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/>   
            
            <p:graphicImage rendered="#{applicationStatusBean.passport ne null}" 
                    width="150" height="150" value="#{applicationStatusBean.passport}" >                
            </p:graphicImage>
            <br/><br/>
            <h:outputText value="Upload Passport" />
            <br/><p:spacer width="10" height="10" /> 
            <h:form enctype="multipart/form-data">
                <p:growl id="Uploadmessages" showDetail="true" />
                <p:fileUpload value="#{applicationStatusBean.file}" mode="simple" />
                <p:commandButton value="Submit" ajax="false" actionListener="#{applicationStatusBean.upload}" />
            </h:form>   
            <br/>
            <p:panelGrid columns="2" columnClasses="label, value">                                      
            <h:outputText value="Application Number" />
            <h:outputText value="#{applicationStatusBean.hostelApplication.applicationNumber} " />
            
            <h:outputText value="Application Date" />
            <h:outputText value="#{applicationStatusBean.applicationDate} " />
                                                         
            <h:outputText value="Student Number" />
            <h:outputText value="#{applicationStatusBean.hostelApplication.studentNumber} " />
                            
            <h:outputText value="First Name" />
            <h:outputText value="#{applicationStatusBean.hostelApplication.firstName}   " />
               
            <h:outputText value="Surname" />
            <h:outputText value="#{applicationStatusBean.hostelApplication.lastName}" />
                        
            <h:outputText value="Other Names" />
            <h:outputText  id="otherNames"  value="#{applicationStatusBean.hostelApplication.otherNames}"/>             
            
            <h:outputText value="Gender" />
            <h:outputText  id="gender"  value="#{applicationStatusBean.hostelApplication.gender}"/>
                                                
            <h:outputText value="Phone Number" />
            <h:outputText  id="phoneNumberField"  value="#{applicationStatusBean.hostelApplication.phoneNumber}"/>
                       
            <h:outputText value="Email" />
            <h:outputText  id="emailField"  value="#{applicationStatusBean.hostelApplication.email}"/>
            
            <h:outputText value="Faculty" />
            <h:outputText  id="facultyField"  value="#{applicationStatusBean.hostelApplication.faculty.name}"/>
                                              
            <h:outputText value="Department" />
            <h:outputText  id="departmentField"  value="#{applicationStatusBean.hostelApplication.department.name}"/>
                     
            <h:outputText value="Course of Study" />
            <h:outputText  id="programmeOfStudyField"  value="#{applicationStatusBean.hostelApplication.programmeOfStudy.name}"/>
               
            <h:outputText value="Year of Study" />
            <h:outputText  id="yearOfAdmissionField"  value="#{applicationStatusBean.hostelApplication.yearOfStudy}"/>
            
            <h:outputText value="Type" />
            <h:outputText  value="#{applicationStatusBean.hostelApplication.studentType.studentType}"/>
               
            <h:outputText value="Ballot" />
            <h:outputText  value="#{applicationStatusBean.ballotStatus}"/>
            
            <h:outputText value="Allocated Room" rendered="#{applicationStatusBean.hasPaid}"/>
            <h:outputText rendered="#{applicationStatusBean.hasPaid}" value="#{applicationStatusBean.hostelApplication.hostelAllocation.hostelRoom.hostel.hostelName}, 
                           Room #{applicationStatusBean.hostelApplication.hostelAllocation.hostelRoom.roomNumber} 
                           (#{applicationStatusBean.hostelApplication.hostelAllocation.hostelRoomBedSpace.position})"/>
                              
            <h:outputText value="Total Amount" />
            <h:outputText id="TotalAmount" value="#{applicationStatusBean.hostelApplication.totalAmount}">        
                    <f:convertNumber type="currency" currencySymbol="=N="/>
            </h:outputText>  
            
            <h:outputText value="Payment Status" />
            <h:outputText  value="#{applicationStatusBean.paymentStatus}"/>                                  
            </p:panelGrid>
            <br/>
            <h:form id="hostelApplicationForm">
                                                               
                <h:commandButton id="pay" value="Pay for Accommodation" action="#{hostelPaymentBean.confirmStatusPayment(applicationStatusBean.hostelApplication)}" 
                         rendered="#{(!applicationStatusBean.hasPaid) and applicationStatusBean.hostelApplication.ballotStatus == 1}"/>            
                <p:spacer width="10" height="10" />
                <h:commandButton id="print" value="Print" action="#{applicationStatusBean.printApplicationStatus}"
                         rendered="#{applicationStatusBean.hasPaid and applicationStatusBean.hostelApplication.passportData ne null}"/>
                <p:spacer width="10" height="10" />          
                <h:commandButton id="close" value="Close" action="#{applicationStatusBean.close}" rendered="#{applicationStatusBean.loggedIn}"/>
                
            </h:form>
        </p:panel>       
		
	

</ui:define>

</ui:composition>
